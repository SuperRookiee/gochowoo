<!DOCTYPE html>
<html
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns="http://www.w3.org/1999/html"
        layout:decorate="~{layout/layout}">

<main layout:fragment="content">
    <th:block th:include="fragments/nav"></th:block>
    <h1 class="text-center fw-bold">Purchase Details</h1>
    <section class="py-3">
        <div class="container" th:each="purchase : ${purchase}">
            <div class="card">
                <div class="card-body">
                    <h3><span th:text="${purchase.status.ko}" th:class="${purchase.status}">주문 상태</span></h3>
                    <h5 class="product_detail_date px-1" th:text="(${#temporals.format(purchase.createdTime, 'yyyy') == #temporals.format(#temporals.createNow(), 'yyyy')} ? ${#temporals.format(purchase.createdTime, 'MM. dd.')}+' 결재' : ${#temporals.format(purchase.createdTime, 'yyyy. MM. dd.')}+' 결재')">날짜 표시</h5>

                    <div class="d-flex p-2" th:each="product : ${purchase.orderHistoryAsList}">
                        <div class="rounded">
                            <img th:if="${product.productId.startsWith('p')}" class="product_img" th:src="@{'/img/pokemon/'+${product.name}+'.png'}" th:alt="${product.name}">
                            <img th:if="${product.productId.startsWith('i')}" class="product_img" th:src="@{'/img/item/'+${product.name}+'.png'}" th:alt="${product.name}">
                        </div>
                        <div class="d-flex flex-column px-3">
                            <label class="product_order_id">결제 확인 번호 : <span th:text="${purchase.createdTime}" >주문 번호</span></label>
                            <span class="product_total_price" th:text="'₽' + ${#numbers.formatDecimal(product.price * product.amount, 0, 'COMMA', 0, 'POINT')}"></span>
                        </div>
                    </div>
                    <div th:text="${}"></div>
                </div>
            </div>
        </div>
    </section>
</main>
</html>